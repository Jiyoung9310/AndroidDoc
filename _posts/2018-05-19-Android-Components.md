---
layout: post
title:  "안드로이드 기초 다지기(1) - 4대 구성요소"
date:   2018-05-19
description: 안드로이드 4대 구성요소에 대해서 알아본다.
---

<p class="intro"><span class="dropcap">안</span>드로이드 기초 다지기 시리즈 그 첫번째!</p>

# 안드로이드 기본 - 4대 구성요소
 - **Activity, Service, BroadCast Receiver, Content Provider**

안드로이드 개발을 위해선 기본적으로 애플리케이션의 구성요소에 대해서 제대로 알고 활용할 수 있어야 한다.

안드로이드 애플리케이션은 크게 4가지의 구성요소로 이루어져있다고 이야기하는데,
1. Activity(액티비티)
2. Service(서비스)
3. BroadCast Receiver(방송수신자)
4. Content Provider(콘텐츠 제공자)

가 바로 그것이다.

## Activity

Activity는 UI화면을 갖는 컴포넌트로 가장 기본적인 구성요소라고 할 수 있다. 우리가 사용하는 앱에서 보여지는 화면 하나가 하나의 Activity라고 생각하면 된다. 보통의 경우 적어도 하나의 Activity가 있어야 앱을 만들 수 있다.
(백그라운드에서만 실행되는 앱이 있을 수도 있겠지만...일반적인 경우에 그렇다는 얘기)

- Fragment : 
Fragment라는 놈이 있는데 이 녀석도 UI화면을 구성하는 역할을 하는 컴포넌트이다. 그럼 Activity랑 무슨 차이가 있느냐! Fragment는 Activity 위에 쌓아올릴 수 있는 화면 레이어라고 할 수 있다.
다양한 크기의 모바일 디바이스가 등장하면서 Fragment라는 개념이 생겨났는데, Fragment를 사용하는 경우는 예를 들면 이런거다. 전공 책에 직접 필기를 하는 것과 포스트잇에 필기를 해서 페이지에 떼었다붙였다 할 수 있는 것의 상태 차이...(아닌가,, 더 적절한 비유가 생각나면 수정해보도록 하겠다) 아무튼 Activity와 함께 UI화면을 구성할 때 사용한다.

## Service

Activity가 눈에 보이는 영역을 담당한다면 Service는 눈에 보이지 않는 백그라운드 영역을 담당하는 컴포넌트이다. 우리가 파일을 다운받거나, 음악을 들을 때 다 완료가 될 때까지 기다리지 않고 다른 작업으로 넘어간 상황에도 계속해서 지정된 작업을 수행할 수 있도록 한다. 멀티태스킹을 가능하게 해주는 아이라고 생각하면 된다.
- Thread : 
백그라운드 작업이라면 Thread로도 구현할 수 있지않을까 라고 생각할 수 있는데, Service가 백그라운드 작업을 담당한다고 하였지만 사실상 동작은 Main Thread에서 이루어지게 된다. 그래서 Main Thread의 작업 부담을 덜어주는 용도로 사용하는 Thread와는 존재의 의미에서부터 차이가 있다.
쉽게는 앱이 사용 중에(화면이 띄워져있는 중일 때) 다중 처리는 Thread로, 앱이 실행 중이지 않을 때(화면이 안보이는 상태) 백그라운드 동작은 Service에서 처리하도록 구현하면 된다.

## BroadCast Receiver

BroadCast Receiver는 기기에서 일어나는 이벤트를 수신할 수 있는 컴포넌트이다. "WiFi가 연결되었다"라던가 "배터리가 15%남았다"라던가 스마트폰의 기본 기능(사진, 전화, 전원) 등의 상황변화를 캐치한다. 핸드폰의 생리변화 감지를 담당한다고나 할까. '문자를 수신할 때마다 앱에 문자내용을 저장시키는 기능을 만들고싶다'한다면 이 녀석을 사용하면 된다.
10초 이상의 시간이 걸리는 작업을 수행할 경우에는 에러가 날 수 있으니 이점 유의하자.

## Content Provider

Content Provider는 애플리케이션 간에 데이터 공유를 할 수 있는 컴포넌트이다. 전화번호 목록을 불러온다던가 다른 앱에서 데이터베이스를 참조하고 싶을 때 사용한다. 사실 제대로 사용해본 적이 없어서 더 쓸 말이 없다...


----
안드로이드 애플리케이션을 구성하는 가장 기본적인 컴포넌트 4가지를 알아보았다. 하나의 앱에 이 4개의 컴포넌트가 필수적으로 있어야하는 건 아니고 역할에 맞게 적절하게 활용하여 구현하면 된다.
그런데 앱을 구현하다보면 한가지 의문이 생길 수 있다. 컴포넌트 간에 데이터 전달이 필요한 경우에는 어떻게 하는가! 예를 들면, BroadCast로 받아온 배터리 잔량을 UI에 표시하고 싶을 경우 intent를 이용해 전달할 수 있다.

## intent

컴포넌트 간 통신을 담당하는 객체이다. 컴포넌트 사이에서 주고받는 작은 소포의 역할을 한다고 보면 된다. 어느 한 컴포넌트에서 수행한 일을 마치고 다른 컴포넌트를 호출할 때, 함께 전달할 데이터를 intent에 담아서 전송하면 다음 컴포넌트 쪽에서 받을 수 있도록 약속된 포맷이다. 한가지 기억해야할 것은 Content Provider는 intent가 아니라 Content Resolver를 통해 활성화시킬 수 있다는 점이다.
