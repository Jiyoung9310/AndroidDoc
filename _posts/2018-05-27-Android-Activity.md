---
layout: post
title:  "안드로이드 기초 다지기(2) - 액티비티 생명주기"
date:   2018-05-27
description: 액티비티 생명주기에 대해 알아본다.
---

<p class="intro"><span class="dropcap">안</span>드로이드 기초 다지기 시리즈 그 두번째!</p>

# 안드로이드 UI기초 - Activity Lifecycle

안드로이드 4대 구성요소 중 하나인 Activity는 UI화면은 구성하는 가장 기본적인 단위이다. 이런 Activity를 다루기 위해선 생명주기를 알아야한다!

Activity는 크게 5가지의 상태를 가진다.
1. Created - 뷰 생성!
2. Started - 화면에 보이기 시작했어. 사용은 아직 불가
3. Resumed - 사용 가능 상태
4. Paused - 일시정지! 기능 멈춰봐. 없어질 수도 있으니까 필요한 데이터 저장해.
5. Stopped - 화면 안보이는 상태


## onCreate()

Activity가 만들어질 때 최초로 한번 실행되는 메소드이다. 이 부분에서 보통 setContentView를 호출하여 xml 레이아웃 파일을 정의한다. 화면에서 사용할 UI구성의 멤버 변수를 정의하는 곳이다.

- Bundle savedInstanceState : 
onCreate()를 override하면 자동으로 매개변수로 savedInstanceState라는 것을 받아오도록 되어있는데, 이것이 무엇이냐! 현재 상태를 저장하고 다음에 이 화면을 다시 보고싶을 때가 있을 것이다. 예를 들면 검색 필터를 적용한다고 했을 때, 다른 화면을 보다가 다시 돌아와도 체크된 필터 상태를 보여줘야 한다. 그럴 경우에 현재 화면 상태를 onSaveInstanceState()메소드를 이용하여 저장할 수 있다. 저장되어있는 데이터가 있는 경우(savedInstanceState != null) 매개변수에서 데이터를 꺼내다가 UI에 표시해주면 된다.

## onStart()와 onResume()

onCreate()가 끝나면 곧바로 onStart() -> onResume()이 호출된다. onStart()는 보여지기 직전에 호출되며, onResume()이 끝나면 사용자와 상호작용할 수 있는 상태가 된다. UI화면이 노출되어 사용자가 이용할 수 있는 상태라는 뜻이다.

---
여기까지가 UI화면이 생성되는 단계이다. onCreate() - onStart() - onResume() 을 거치면 사용자에게 화면이 표시된다. 화면이 소멸되는 과정도 알아보자.


## onPause()

화면의 일부가 가려질 경우 onPause()가 호출된다. 현재 앱을 사용하는 도중에 카톡 간편 답장기능을 사용할 경우처럼, 화면의 일부가 가려지게 되는 때 라고 생각하면 된다. 이 상태가 되면 일시정지 상태가 되는데, 화면이 소멸될 수도 있는 상태라고 보기 때문에 onPause()에서는 현재 다루고있는 데이터를 저장한다. 다른 작업을 하다가 다시 돌아오면 onResume()이 호출되어 Resumed 상태가 된다.

- 필자의 경우에는 전에 프로젝트 작업을 할 때 동영상 자료를 제공하는 앱을 만들었는데, 동영상을 보다가 전화를 받고나면 앱이 오류가 나는 경우가 있었다. 그래서 onPause()에서 현재 재생되고 있는 동영상을 일시정지시키고 재생 시간을 저장해두었다가, 앱이 다시 Resumed 상태가 되었을 때 재생 시간 -2초 전부터 자동 재생되도록 구현하였다.

## onStop()

화면이 일부가 아니라 100%가려진 상태가 되었을 때 호출된다. 앱이 완전히 정지되어 사용할 수 없는 상태가 된 것이라고 보면 된다. 이 상태에서 다시 앱으로 돌아오면 onResume()이 아니라 onRestart() - onStart() - onResume() 순으로 호출하게 된다. (액티비티 생명주기를 잘 알아야하는 이유가 바로 이런 상황에 대비하여 상태별로 구현해야하기 때문이다....)


## onDestroy()

앱이 오랜시간 사용되지 않거나 완전히 스택에서 제거될 경우에 호출되는 메소드이다. 시스템 메모리에서 완전히 제거되는 것이다. 아직까지 백업되어야하는 데이터가 있는 경우 이곳에서 데이터를 저장하면 된다. Destroy상태가 되면 앱을 시작할 경우 onCreate()부터 다시 타게된다. 뷰를 처음부터 다시 그리는거다.

---
구구절절 설명했는데 사실 이 사진 하나면 설명 끝난다.
![basic-lifecycle](https://user-images.githubusercontent.com/7722921/40585069-140ed516-61e7-11e8-8fae-08c3ee0c76a0.png)
